<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://www.gstatic.com/charts/loader.js"></script>
        <title>TerroristTracker</title>
        <link rel="stylesheet" href="/static/styles.css">
        <link rel="stylesheet" href="/static/statistics/filtered-search.css">
        <link rel="stylesheet" href="/static/statistics/filters.css">
        <link rel="stylesheet" href="/static/statistics/filters2.css">
        <link rel="stylesheet" href="/static/statistics/chart.css">
        <link rel="stylesheet" href="/static/homepage/home.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
              integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
                integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
    </head>

    <body>
        <header>
            <div class="logo">Terrorism Visualizer</div>
            <div class="hamburger">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
            <nav class="nav-bar">
                <ul>
                    <li>
                        <a href="#home" class="active scrollable">Home</a>
                    </li>
                    <li>
                        <a href="#news" class="scrollable">News</a>
                    </li>
                    <li>
                        <a href="#stat" class="scrollable">Statistics</a>
                    </li>
                    <li>
                        <a href="#mapping" class="scrollable">Map</a>
                    </li>
                    <li>
                        <a href="#" id="login" class="scrollable">Log-in</a>
                    </li>
                </ul>
            </nav>
        </header>
        <div class="vertical-container">
            <div class="section home" id="home">
                <div class="home-text">
                    <p class = "p1">Terrorism, in its broadest sense, is the use of intentional violence
                        and fear to achieve political or ideological aims.
                        The term is used in this regard primarily to refer to
                        intentional violence during peacetime or in the context of
                        war against non-combatants (mostly civilians and
                        neutral military personnel)</p>
                </div>
            </div>

            <div class="section" id="news">
                <div class="section-header">Last News </div>
                <div class="slideshow-container">
                    <!-- Full-width images with number and caption text -->
                    <div class="mySlides fade">
                        <div class="numbertext">1 / 3</div>
                        <img class = "image" type="image/jpeg"  src="/static/images/img1.jpeg" style="width:100%" alt="..." loading="lazy">
                        <a href="https://news.sky.com/story/man-arrested-in-germany-on-suspicion-of-procuring-cyanide-and-ricin-for-islamist-motivated-attack-12782428" target="_blank">
                            <div class="text">
                                Man arrested in Germany on suspicion of procuring cyanide and ricin for 'Islamist-motivated' attack
                            </div>
                        </a>
                    </div>

                    <div class="mySlides fade">
                        <div class="numbertext">2 / 3</div>
                        <img class = "image" type="image/jpeg" src="/static/images/img2.jpeg" style="width:100%" alt="..." loading="lazy">
                        <a href="https://www.usnews.com/news/world/articles/2023-03-28/2-dead-in-portugal-stabbing-at-muslim-center" target="_blank">
                            <div class="text">
                                Portugal: Refugee Held as Suspect in Muslim Center Stabbings
                            </div>
                        </a>
                    </div>

                    <div class="mySlides fade">
                        <div class="numbertext">3 / 3</div>
                        <img class = "image" src="/static/images/img3.jpg" style="width:100%" alt="..." loading="lazy">
                        <a href="https://www.independent.co.uk/news/uk/home-news/iran-irgc-terrorist-group-uk-b2260184.html" target="_blank">
                            <div class="text">
                                Declaring Iran’s IRGC a terrorist group would destabilise UK’s definition of terrorism, Suella Braverman warned
                            </div>
                        </a>
                    </div>

                    <!-- Next and previous buttons -->
                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                    <a class="next" onclick="plusSlides(1)">&#10095;</a>
                </div>
                <br>

                <!-- The dots/circles -->
                <div style="text-align:center">
                    <span class="dot" onclick="currentSlide(1)"></span>
                    <span class="dot" onclick="currentSlide(2)"></span>
                    <span class="dot" onclick="currentSlide(3)"></span>
                </div>

            </div>
                <div class="section" id="stat">
                    <div class="section-header">Statistics </div>
                    <br>
                    <div class="horizontal-container">
                        <form class="form" id="formId">
                            <div class="bars">
                                <input type="text" placeholder="Search here...">
                                <input type="submit" value="Submit">
                            </div>
                            <label for="region">Select Region: </label>
                            <br>
                            <select>
                                <option value="1">Select region: </option>
                                <option value="2">Central America</option>
                                <option value="3">Western Europe</option>
                                <option value="4">East Asia</option>
                                <option value="5">Middle East & North Africa</option>
                                <option value="6">Southeast Asia</option>
                                <option value="7">North America</option>
                            </select>
                            <br>
                            <label for="attack-type">Select Attack Type: </label>
                            <br>
                            <select>
                                <option value="1">Attack type: </option>
                                <option value="2">Assassination</option>
                                <option value="3">Hostage Taking</option>
                                <option value="4">Bombing</option>
                                <option value="5">Armed Assault</option>
                                <option value="6">Other Crime Type</option>
                            </select>
                            <br>
                            <label for="main-target">Select Main Target: </label>
                            <br>
                            <select>
                                <option value="1">Main target: </option>
                                <option value="2">Big Target</option>
                                <option value="3">Medium Target Taking</option>
                                <option value="4">Small Target</option>
                                <option value="5">Dangerous Target</option>
                                <option value="6">Other Targets</option>
                            </select>
                            <br>
                            <label for="main-target">Select Main Nationality: </label>
                            <select>
                                <option value="1">Target nationality: </option>
                                <option value="2">Indian</option>
                                <option value="3">Chinese</option>
                                <option value="4">American</option>
                                <option value="5">French</option>
                                <option value="6">Russian</option>
                            </select>
                            <br>
                            <label for="main-weapon">Select Main Weapon: </label>
                            <br>
                            <select>
                                <option value="1">Main weapon: </option>
                                <option value="2">Watergun</option>
                                <option value="3">AK-47</option>
                                <option value="4">Glass bottle</option>
                                <option value="5">Fists</option>
                                <option value="6">Hands</option>
                            </select>
                            <br>
                            <label for="chart">Select-Chart: </label>
                            <br>
                            <select>
                                <option value="1">Chart Type: </option>
                                <option value="2">Pie Chart</option>
                                <option value="3">Bar Chart</option>
                                <option value="4">Line Chart</option>
                                <option value="5">Scatter Chart</option>
                            </select>

                            <input type="button" value="Analyze" id="generate-chart">
                        </form>
                        <div class="chart">
                            <div id="myPieChart"></div>
                            <div id="myBarChart"></div>
                        </div>

                    </div>
                </div>

                <div class="section map" id="mapping">
                    <div class="section-header">Map Visualizer</div>
                    <br>
                    <div class="horizontal-container">
                        <form class="form">
                            <label for="interval">From:</label>
                            <input type="date" id="interval" name="interval">
                            <br>
                            <label for="interval">Until:</label>
                            <input type="date" id="interval" name="interval">
                            <br>
                            <label for="organization">Organization Name:</label>
                            <select id="Organization" name="Organisation">
                                <option value="Black Panthers">Black Panthers</option>
                                <option value="ISIS">ISIS</option>
                                <option value="Al-Qaeeda">Al-Qaeeda</option>
                                <option value="Irish Republican Army">Irish Republican Army</option>
                                <option value="Unknown">Unknown</option>
                            </select>
                            <br>
                            <input type="submit" value="Analyze">
                        </form>
                        <div id="map"></div>
                    </div>
                </div>
        </div>
        <button onclick="topFunction()" id="myBtn" title="Go to top">
            <span>&#8686;</span>
        </button>
        <script src="/static/scrollTopButton.js"> </script>
        <script src="/static/statistics/filter.js"> </script>
        <script src="/static/animate.js"> </script>

        <!-- Script pentru nav-bar cand max-width = 900px -->
        <script>
              hamburger = document.querySelector(".hamburger");
              hamburger.onclick = function() {
                navbar = document.querySelector(".nav-bar");
                navbar.classList.toggle("active");
              }
        </script>

        <script>
            // Get references to all the divs with the specified class
            const targetDivs = document.querySelectorAll('.section');

            // Function to handle scroll event with debounce
            function debounce(func, delay) {
                let timer;
                return function () {
                    clearTimeout(timer);
                    timer = setTimeout(func, delay);
                };
            }

            // Function to handle URL change logic
            function handleURLChange() {
                const viewportTop = window.scrollY;
                const viewportBottom = viewportTop + window.innerHeight;

                // Loop through the target divs and check if they are in view
                targetDivs.forEach((div) => {
                    const divTop = div.offsetTop;
                    const divBottom = divTop + div.offsetHeight;

                    // Check if the div is at least 50% in the viewport
                    if (divTop <= viewportBottom - (div.offsetHeight * 0.5) && divBottom >= viewportTop + (div.offsetHeight * 0.5)) {
                        const id = div.getAttribute('id');
                        // Modify the URL using the History API
                        history.pushState({}, '', `/#${id}`); // Use the div's id in the URL
                    }
                });
            }

            // Attach debounced scroll event listener to the window object
            window.addEventListener('scroll', debounce(handleURLChange, 200));
        </script>


        <!--Script pentru fade scroll-->
        <script>
            $(window).scroll(function() {
          var scrollTop = $(this).scrollTop();

          $('.home').css({
            opacity: function() {
              var elementHeight = $(this).height();
              opacity = ((elementHeight - scrollTop) / elementHeight);
              return opacity;
            }
          });
        });
        </script>
        <script>
            $(window).scroll(function() {
          var scrollTop = $(this).scrollTop();

          $('.map').css({
            opacity: function() {
              var elementHeight = $(this).height();
              opacity = (1 - ((elementHeight - scrollTop) / elementHeight));
              return opacity;
            }
          });
        });
        </script>
    </body>
</html>
